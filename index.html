<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Tap to Earn BNB</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
        }
        
        /* Header */
        .header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 20px;
        }
        
        .logo {
            font-size: 40px;
            margin-bottom: 10px;
        }
        
        .title {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(90deg, #F0B90B, #FFD700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }
        
        .subtitle {
            opacity: 0.8;
            font-size: 14px;
        }
        
        /* Balance Card */
        .balance-card {
            background: rgba(240, 185, 11, 0.1);
            border: 2px solid #F0B90B;
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .balance-label {
            font-size: 14px;
            opacity: 0.8;
            margin-bottom: 10px;
        }
        
        .balance-amount {
            font-size: 48px;
            font-weight: bold;
            color: #F0B90B;
            margin: 10px 0;
        }
        
        .balance-usd {
            font-size: 18px;
            opacity: 0.8;
        }
        
        /* Tap Button */
        .tap-container {
            position: relative;
            margin: 30px 0;
        }
        
        .tap-button {
            width: 200px;
            height: 200px;
            margin: 0 auto;
            background: radial-gradient(circle, #F0B90B 0%, #D4A017 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: #0f172a;
            cursor: pointer;
            user-select: none;
            transition: all 0.1s;
            box-shadow: 0 10px 30px rgba(240, 185, 11, 0.3);
            border: 5px solid #FFD700;
        }
        
        .tap-button:active {
            transform: scale(0.95);
            box-shadow: 0 5px 15px rgba(240, 185, 11, 0.2);
        }
        
        .tap-stats {
            text-align: center;
            margin-top: 20px;
        }
        
        .tap-count {
            font-size: 18px;
            color: #F0B90B;
            font-weight: bold;
        }
        
        /* Tasks */
        .section-title {
            font-size: 20px;
            margin: 30px 0 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .tasks-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .task-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .task-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }
        
        .task-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .task-title {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .task-reward {
            color: #F0B90B;
            font-weight: bold;
            font-size: 16px;
        }
        
        .task-status {
            font-size: 12px;
            opacity: 0.7;
            margin-top: 5px;
        }
        
        /* Withdraw Section */
        .withdraw-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 25px;
            margin: 30px 0;
        }
        
        .withdraw-form {
            display: none;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .form-group input {
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 16px;
        }
        
        .withdraw-button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(90deg, #F0B90B, #D4A017);
            color: #0f172a;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .withdraw-button:hover {
            opacity: 0.9;
        }
        
        .withdraw-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #F0B90B;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.7;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10B981;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            display: none;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        /* Price Info */
        .price-info {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            margin: 20px 0;
            font-size: 14px;
        }
        
        .price-update {
            font-size: 12px;
            opacity: 0.7;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">üöÄ</div>
            <div class="title">TAP TO EARN BNB</div>
            <div class="subtitle">Nh·∫•n ƒë·ªÉ ki·∫øm BNB m·ªói ng√†y</div>
        </div>
        
        <!-- Balance -->
        <div class="balance-card">
            <div class="balance-label">S·ªê D∆Ø BNB C·ª¶A B·∫†N</div>
            <div class="balance-amount" id="bnbBalance">0.00000000</div>
            <div class="balance-usd" id="usdBalance">‚âà 0.00 USD</div>
            <div class="tap-stats">
                <div>H√¥m nay: <span id="todayTaps">0</span>/1000 taps</div>
                <div class="tap-count">M·ªói tap: 0.00000012 BNB</div>
            </div>
        </div>
        
        <!-- Tap Button -->
        <div class="tap-container">
            <div class="tap-button" id="tapButton" onclick="tap()">
                <div style="text-align: center;">
                    <div style="font-size: 32px;">üëÜ</div>
                    <div>TAP HERE</div>
                    <div style="font-size: 14px; margin-top: 5px;">+0.00000012 BNB</div>
                </div>
            </div>
        </div>
        
        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="totalTaps">0</div>
                <div class="stat-label">T·ªïng Tap</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="todayEarned">0.00</div>
                <div class="stat-label">BNB H√¥m nay</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="tasksCompleted">0</div>
                <div class="stat-label">Nhi·ªám v·ª•</div>
            </div>
        </div>
        
        <!-- Price Info -->
        <div class="price-info">
            <div>üíé 1 BNB = <span id="bnbPrice">948</span> USDT</div>
            <div class="price-update">C·∫≠p nh·∫≠t: <span id="priceTime">20 ph√∫t tr∆∞·ªõc</span></div>
        </div>
        
        <!-- Tasks Section -->
        <h3 class="section-title">üìã NHI·ªÜM V·ª§ KI·∫æM TH√äM</h3>
        <div class="tasks-grid">
            <!-- Task 1: Xem qu·∫£ng c√°o -->
            <div class="task-card" onclick="startTask('ad')" id="adTask">
                <div class="task-icon">üì∫</div>
                <div class="task-title">Xem Qu·∫£ng C√°o</div>
                <div class="task-reward">+500 tap/30 ph√∫t</div>
                <div class="task-status" id="adStatus">C√≤n <span id="adCount">10</span> l∆∞·ª£t</div>
            </div>
            
            <!-- Task 2: Nh·∫•n Link 1 -->
            <div class="task-card" onclick="startTask('link1')" id="link1Task">
                <div class="task-icon">üîó</div>
                <div class="task-title">Nh·∫•n Link VNDShare</div>
                <div class="task-reward">+1000 tap</div>
                <div class="task-status" id="link1Status">H√¥m nay ch∆∞a l√†m</div>
            </div>
            
            <!-- Task 3: Nh·∫•n Link 2 -->
            <div class="task-card" onclick="startTask('link2')" id="link2Task">
                <div class="task-icon">üîó</div>
                <div class="task-title">Nh·∫•n Link VNShare</div>
                <div class="task-reward">+1000 tap</div>
                <div class="task-status" id="link2Status">H√¥m nay ch∆∞a l√†m</div>
            </div>
            
            <!-- Task 4: Tham gia nh√≥m -->
            <div class="task-card" onclick="startTask('joinGroup')" id="groupTask">
                <div class="task-icon">üë•</div>
                <div class="task-title">Tham gia nh√≥m</div>
                <div class="task-reward">+10,000 tap</div>
                <div class="task-status" id="groupStatus">Ch∆∞a tham gia</div>
            </div>
            
            <!-- Task 5: Youtube Code -->
            <div class="task-card" onclick="startTask('youtube')" id="youtubeTask">
                <div class="task-icon">üé¨</div>
                <div class="task-title">Nh·∫≠p code Youtube</div>
                <div class="task-reward">+100,000 tap</div>
                <div class="task-status" id="youtubeStatus">Ch∆∞a l√†m</div>
            </div>
            
            <!-- Task 6: V∆∞·ª£t link -->
            <div class="task-card" onclick="startTask('linkVerify')" id="verifyTask">
                <div class="task-icon">‚úÖ</div>
                <div class="task-title">V∆∞·ª£t link x√°c minh</div>
                <div class="task-reward">+10,000,000 tap</div>
                <div class="task-status" id="verifyStatus">Ch∆∞a l√†m</div>
            </div>
        </div>
        
        <!-- Withdraw Section -->
        <div class="withdraw-section">
            <h3 class="section-title">üöÄ R√öT BNB V·ªÄ V√ç</h3>
            <div class="price-info" style="background: rgba(240, 185, 11, 0.1);">
                <div>üí∞ T·ªëi thi·ªÉu r√∫t: <strong>0.0008 BNB</strong></div>
                <div>‚è≥ X·ª≠ l√Ω: 5-30 ph√∫t</div>
            </div>
            
            <button class="withdraw-button" onclick="showWithdrawForm()" id="withdrawBtn">
                R√öT BNB V·ªÄ V√ç
            </button>
            
            <div class="withdraw-form" id="withdrawForm">
                <div class="form-group">
                    <label>ƒê·ªãa ch·ªâ v√≠ BNB (BEP20):</label>
                    <input type="text" id="walletAddress" placeholder="0x..." maxlength="42">
                </div>
                
                <div class="form-group">
                    <label>S·ªë l∆∞·ª£ng BNB mu·ªën r√∫t:</label>
                    <input type="number" id="withdrawAmount" placeholder="0.0008" step="0.000001" min="0.0008">
                    <div style="font-size: 12px; opacity: 0.7; margin-top: 5px;">
                        S·ªë d∆∞ kh·∫£ d·ª•ng: <span id="availableBalance">0.00000000</span> BNB
                    </div>
                </div>
                
                <div class="form-group">
                    <label>B·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c:</label>
                    <div style="text-align: center; font-size: 20px; font-weight: bold; color: #F0B90B; padding: 10px; background: rgba(240, 185, 11, 0.1); border-radius: 8px;">
                        <span id="receiveAmount">0.0000</span> BNB
                    </div>
                    <div style="text-align: center; font-size: 14px; opacity: 0.7; margin-top: 5px;">
                        ‚âà <span id="receiveUSD">0.00</span> USD
                    </div>
                </div>
                
                <button class="withdraw-button" onclick="processWithdrawal()">
                    X√ÅC NH·∫¨N R√öT
                </button>
            </div>
        </div>
        
        <!-- Footer -->
        <div style="text-align: center; margin: 30px 0; font-size: 12px; opacity: 0.5;">
            ¬© 2024 Tap to Earn BNB | T·ª∑ gi√° c·∫≠p nh·∫≠t 20 ph√∫t/l·∫ßn
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <span id="notificationText"></span>
    </div>
    
    <script>
        // ========== KH·ªûI T·∫†O ==========
        const tg = window.Telegram.WebApp;
        tg.expand(); // M·ªü full m√†n h√¨nh
        
        // L·∫•y th√¥ng tin user
        const user = tg.initDataUnsafe?.user;
        const userId = user?.id || Date.now();
        
        // D·ªØ li·ªáu user (trong th·ª±c t·∫ø l∆∞u database)
        let userData = {
            balance: 0.00000123,
            totalTaps: 0,
            todayTaps: 0,
            todayEarned: 0,
            tasks: {
                ad: { count: 10, lastTime: null },
                link1: { completed: false, date: null },
                link2: { completed: false, date: null },
                joinGroup: false,
                youtube: false,
                linkVerify: false
            },
            withdrawalHistory: []
        };
        
        // T·ª∑ gi√°
        const BNB_PRICE = 948; // 1 BNB = 948 USDT
        const TAP_REWARD = 0.00000012; // M·ªói tap
        
        // ========== H√ÄM HI·ªÇN TH·ªä ==========
        function updateDisplay() {
            // C·∫≠p nh·∫≠t s·ªë d∆∞
            document.getElementById('bnbBalance').textContent = userData.balance.toFixed(8);
            document.getElementById('usdBalance').textContent = `‚âà ${(userData.balance * BNB_PRICE).toFixed(2)} USD`;
            
            // C·∫≠p nh·∫≠t tap
            document.getElementById('todayTaps').textContent = userData.todayTaps;
            document.getElementById('totalTaps').textContent = userData.totalTaps;
            document.getElementById('todayEarned').textContent = userData.todayEarned.toFixed(8);
            
            // C·∫≠p nh·∫≠t nhi·ªám v·ª• ƒë√£ ho√†n th√†nh
            const completedTasks = Object.values(userData.tasks).filter(task => 
                typeof task === 'object' ? task.completed || task.count === 0 : task
            ).length;
            document.getElementById('tasksCompleted').textContent = completedTasks;
            
            // C·∫≠p nh·∫≠t gi√°
            document.getElementById('bnbPrice').textContent = BNB_PRICE;
            document.getElementById('availableBalance').textContent = userData.balance.toFixed(8);
            
            // C·∫≠p nh·∫≠t tr·∫°ng th√°i nhi·ªám v·ª•
            updateTaskStatus();
            
            // Ki·ªÉm tra ƒë·ªß ƒëi·ªÅu ki·ªán r√∫t
            const withdrawBtn = document.getElementById('withdrawBtn');
            if (userData.balance >= 0.0008) {
                withdrawBtn.disabled = false;
                withdrawBtn.innerHTML = `R√öT ${userData.balance.toFixed(8)} BNB`;
            } else {
                withdrawBtn.disabled = true;
                withdrawBtn.innerHTML = `C·∫¶N TH√äM ${(0.0008 - userData.balance).toFixed(8)} BNB`;
            }
        }
        
        // ========== TAP FUNCTION ==========
        function tap() {
            // Ki·ªÉm tra gi·ªõi h·∫°n 1000 tap/ng√†y
            if (userData.todayTaps >= 1000) {
                showNotification('‚ö†Ô∏è ƒê√£ ƒë·∫°t 1000 tap h√¥m nay! L√†m nhi·ªám v·ª• ƒë·ªÉ c√≥ th√™m tap.');
                return;
            }
            
            // Hi·ªáu ·ª©ng tap
            const tapBtn = document.getElementById('tapButton');
            tapBtn.style.transform = 'scale(0.95)';
            setTimeout(() => {
                tapBtn.style.transform = 'scale(1)';
            }, 100);
            
            // Th√™m BNB
            userData.balance += TAP_REWARD;
            userData.todayEarned += TAP_REWARD;
            userData.todayTaps++;
            userData.totalTaps++;
            
            // Hi·ªÉn th·ªã th√¥ng b√°o
            showNotification(`+${TAP_REWARD.toFixed(8)} BNB! Tap: ${userData.todayTaps}/1000`);
            
            // C·∫≠p nh·∫≠t hi·ªÉn th·ªã
            updateDisplay();
            
            // L∆∞u d·ªØ li·ªáu (trong th·ª±c t·∫ø g·ª≠i v·ªÅ server)
            saveUserData();
        }
        
        // ========== TASK FUNCTIONS ==========
        function startTask(taskType) {
            switch(taskType) {
                case 'ad':
                    // Xem qu·∫£ng c√°o - 10 l·∫ßn/ng√†y, m·ªói l·∫ßn +500 tap
                    if (userData.tasks.ad.count > 0) {
                        // M·ªü qu·∫£ng c√°o
                        showNotification('üì∫ ƒêang m·ªü qu·∫£ng c√°o...');
                        
                        // Gi·∫£ l·∫≠p xem qu·∫£ng c√°o 30 gi√¢y
                        setTimeout(() => {
                            userData.tasks.ad.count--;
                            userData.todayTaps += 500;
                            userData.balance += (500 * TAP_REWARD);
                            userData.todayEarned += (500 * TAP_REWARD);
                            
                            showNotification('‚úÖ Xem qu·∫£ng c√°o th√†nh c√¥ng! +500 tap');
                            updateDisplay();
                            saveUserData();
                        }, 1000);
                    } else {
                        showNotification('‚ö†Ô∏è ƒê√£ h·∫øt l∆∞·ª£t xem qu·∫£ng c√°o h√¥m nay!');
                    }
                    break;
                    
                case 'link1':
                    // Link VNDShare - 1 l·∫ßn/ng√†y, +1000 tap
                    if (!userData.tasks.link1.completed) {
                        // M·ªü link
                        window.open('https://vndshare.net/g3143511093', '_blank');
                        
                        userData.tasks.link1.completed = true;
                        userData.todayTaps += 1000;
                        userData.balance += (1000 * TAP_REWARD);
                        userData.todayEarned += (1000 * TAP_REWARD);
                        
                        